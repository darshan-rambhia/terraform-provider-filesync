---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "filesync_directory Resource - filesync"
subcategory: ""
description: |-
  Manages synchronization of a directory to a remote host via SSH/SFTP.
  This resource syncs all files in a source directory to a destination directory on the remote host.
  It tracks individual file hashes and only uploads files that have changed.
  Behavior
  Plan: Computes hashes for all local files, compares with stateApply:
  Connects to remote host via SSHCreates destination directory structureUploads only changed filesSets ownership and permissions on all filesRemoves files from remote that no longer exist locally
  Example Usage
  
  resource "filesync_directory" "configs" {
    source      = "${path.module}/configs"
    destination = "/etc/myapp"
    host        = "192.168.1.100"
  
    owner = "root"
    group = "root"
    mode  = "0644"
  
    exclude = [
      "*.tmp",
      ".git",
      "*.bak"
    ]
  }
---

# filesync_directory (Resource)

Manages synchronization of a directory to a remote host via SSH/SFTP.

This resource syncs all files in a source directory to a destination directory on the remote host.
It tracks individual file hashes and only uploads files that have changed.

## Behavior

- **Plan**: Computes hashes for all local files, compares with state
- **Apply**:
  1. Connects to remote host via SSH
  2. Creates destination directory structure
  3. Uploads only changed files
  4. Sets ownership and permissions on all files
  5. Removes files from remote that no longer exist locally

## Example Usage

```hcl
resource "filesync_directory" "configs" {
  source      = "${path.module}/configs"
  destination = "/etc/myapp"
  host        = "192.168.1.100"

  owner = "root"
  group = "root"
  mode  = "0644"

  exclude = [
    "*.tmp",
    ".git",
    "*.bak"
  ]
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (String) Absolute path on the remote host where files should be placed.
- `host` (String) Remote host address (IP or hostname).
- `source` (String) Path to the local source directory.

### Optional

- `bastion_host` (String) Bastion/jump host address for multi-hop SSH connections. Overrides provider default.
- `bastion_key_path` (String) Path to SSH private key file for bastion host. Falls back to ssh_key_path if not set. Overrides provider default.
- `bastion_password` (String, Sensitive) SSH password for bastion host (sensitive). Overrides provider default.
- `bastion_port` (Number) Bastion host SSH port. Defaults to 22. Overrides provider default.
- `bastion_private_key` (String, Sensitive) SSH private key content for bastion host (sensitive). Falls back to ssh_private_key if not set. Overrides provider default.
- `bastion_user` (String) SSH user for bastion host. Falls back to ssh_user if not set. Overrides provider default.
- `exclude` (List of String) List of glob patterns to exclude from sync (e.g., `*.tmp`, `.git`, `.DS_Store`). Supports standard glob syntax with `*` and `?` wildcards.
- `group` (String) File group on remote. Defaults to the SSH user's primary group.
- `mode` (String) File permissions in octal notation (e.g., '0644' for rw-r--r--) applied to all files. Must be 4 digits. Defaults to '0644'.
- `owner` (String) File owner on remote. Defaults to the SSH user.
- `ssh_certificate` (String, Sensitive) SSH certificate content for certificate authentication. Used with ssh_private_key or ssh_key_path. Overrides provider default.
- `ssh_certificate_path` (String) Path to SSH certificate file for certificate authentication. Used with ssh_private_key or ssh_key_path. Overrides provider default.
- `ssh_key_path` (String) Path to SSH private key file. Mutually exclusive with ssh_private_key.
- `ssh_password` (String, Sensitive) SSH password for password authentication. Overrides provider default.
- `ssh_port` (Number) SSH port. Defaults to 22.
- `ssh_private_key` (String, Sensitive) SSH private key content. Mutually exclusive with ssh_key_path.
- `ssh_user` (String) SSH user. Overrides provider default.

### Read-Only

- `file_count` (Number) Number of files in the directory (including those in subdirectories) that were synced. Excludes files matching the exclude patterns.
- `file_hashes` (Map of String) Map of relative file paths to their SHA256 hashes.
- `id` (String) Resource identifier (host:destination).
- `source_hash` (String) Combined SHA256 hash of all source files.
- `total_size` (Number) Total size of all synced files in bytes.
