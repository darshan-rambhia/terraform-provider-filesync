---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "filesync_file Resource - filesync"
subcategory: ""
description: |-
  Manages a single file on a remote host via SSH/SFTP.
  Behavior
  Plan: Compares local file hash against state. Shows change if local file modified.Apply:
  Connects to remote host via SSHChecks remote file hash against state (drift detection)If remote was modified externally, fails with error showing diffIf no drift, uploads new file contentSets ownership and permissionsUpdates state with new hash
  Drift Detection
  If someone modifies the remote file outside of Terraform, apply will fail:
  
  Error: Remote file drift detected
  
    Resource: filesync_file.config
    File: /etc/myapp/app.conf
  
    Expected (from state): sha256:abc123...
    Found (on remote):     sha256:def456...
  
    To resolve:
      - terraform refresh   # Accept remote as source of truth
      - terraform apply -replace=filesync_file.config  # Force overwrite
  
  Example Usage
  
  resource "filesync_file" "nginx_config" {
    source      = "${path.module}/configs/nginx.conf"
    destination = "/etc/nginx/nginx.conf"
    host        = "192.168.1.100"
  
    owner = "root"
    group = "root"
    mode  = "0644"
  
    ssh_user     = "deploy"
    ssh_key_path = "~/.ssh/deploy_key"
  }
---

# filesync_file (Resource)

Manages a single file on a remote host via SSH/SFTP.

## Behavior

- **Plan**: Compares local file hash against state. Shows change if local file modified.
- **Apply**:
  1. Connects to remote host via SSH
  2. Checks remote file hash against state (drift detection)
  3. If remote was modified externally, fails with error showing diff
  4. If no drift, uploads new file content
  5. Sets ownership and permissions
  6. Updates state with new hash

## Drift Detection

If someone modifies the remote file outside of Terraform, apply will fail:

```
Error: Remote file drift detected

  Resource: filesync_file.config
  File: /etc/myapp/app.conf

  Expected (from state): sha256:abc123...
  Found (on remote):     sha256:def456...

  To resolve:
    - terraform refresh   # Accept remote as source of truth
    - terraform apply -replace=filesync_file.config  # Force overwrite
```

## Example Usage

```hcl
resource "filesync_file" "nginx_config" {
  source      = "${path.module}/configs/nginx.conf"
  destination = "/etc/nginx/nginx.conf"
  host        = "192.168.1.100"

  owner = "root"
  group = "root"
  mode  = "0644"

  ssh_user     = "deploy"
  ssh_key_path = "~/.ssh/deploy_key"
}
```



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (String) Absolute path on the remote host where the file should be placed.
- `host` (String) Remote host address (IP or hostname).
- `source` (String) Path to the local source file. Can be relative or absolute path.

### Optional

- `bastion_host` (String) Bastion/jump host address for multi-hop SSH connections.
- `bastion_key_path` (String) Path to SSH private key file for bastion host. Falls back to ssh_key_path if not set.
- `bastion_password` (String, Sensitive) SSH password for bastion host (sensitive).
- `bastion_port` (Number) Bastion host SSH port. Defaults to 22.
- `bastion_private_key` (String, Sensitive) SSH private key content for bastion host (sensitive). Falls back to ssh_private_key if not set.
- `bastion_user` (String) SSH user for bastion host. Falls back to ssh_user if not set.
- `group` (String) File group on remote. Defaults to the SSH user's primary group.
- `insecure_ignore_host_key` (Boolean) Skip SSH host key verification. WARNING: This is insecure and should only be used for testing or in trusted environments. Defaults to false.
- `mode` (String) File permissions in octal notation (e.g., '0644' for rw-r--r--). Must be 3-4 digits. Defaults to '0644'.
- `owner` (String) File owner on remote. Defaults to the SSH user.
- `ssh_certificate` (String, Sensitive) SSH certificate content for certificate authentication. Used with ssh_private_key or ssh_key_path. Overrides provider default.
- `ssh_certificate_path` (String) Path to SSH certificate file for certificate authentication. Used with ssh_private_key or ssh_key_path. Overrides provider default.
- `ssh_key_path` (String) Path to SSH private key file. Mutually exclusive with ssh_private_key.
- `ssh_password` (String, Sensitive) SSH password for password authentication. Overrides provider default.
- `ssh_port` (Number) SSH port. Defaults to 22.
- `ssh_private_key` (String, Sensitive) SSH private key content. Mutually exclusive with ssh_key_path.
- `ssh_user` (String) SSH user. Overrides provider default.

### Read-Only

- `id` (String) Resource identifier (host:destination).
- `size` (Number) Size of the file in bytes.
- `source_hash` (String) SHA256 hash of the source file in format `sha256:<hex>`. Updated when local file changes.
